<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>screen-recorder: ScreenRecorder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">screen-recorder<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">screen-recorder is a multiplatform C++ library that allows to capture your screen and optionally microphone audio, build with FFmpeg</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../dd/d90/classScreenRecorder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ScreenRecorder Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3fee5b65c2e97b01be6f182ce2d4ad74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a3fee5b65c2e97b01be6f182ce2d4ad74">ScreenRecorder</a> (bool verbose=false)</td></tr>
<tr class="separator:a3fee5b65c2e97b01be6f182ce2d4ad74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd7e57370005baabd7dd673d5a5d1616"><td class="memItemLeft" align="right" valign="top"><a id="afd7e57370005baabd7dd673d5a5d1616" name="afd7e57370005baabd7dd673d5a5d1616"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ScreenRecorder</b> (const <a class="el" href="../../d2/d44/classScreenRecorder.html">ScreenRecorder</a> &amp;)=delete</td></tr>
<tr class="separator:afd7e57370005baabd7dd673d5a5d1616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c2980d7394feca457e5b9c7e6a97f57"><td class="memItemLeft" align="right" valign="top"><a id="a5c2980d7394feca457e5b9c7e6a97f57" name="a5c2980d7394feca457e5b9c7e6a97f57"></a>
<a class="el" href="../../d2/d44/classScreenRecorder.html">ScreenRecorder</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../d2/d44/classScreenRecorder.html">ScreenRecorder</a> &amp;)=delete</td></tr>
<tr class="separator:a5c2980d7394feca457e5b9c7e6a97f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7025191be3141da7e7283c66ddf8d4b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a7025191be3141da7e7283c66ddf8d4b8">start</a> (const std::string &amp;video_device, const std::string &amp;audio_device, const std::string &amp;output_file, <a class="el" href="../../da/d57/classVideoParameters.html">VideoParameters</a> video_params)</td></tr>
<tr class="separator:a7025191be3141da7e7283c66ddf8d4b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893530f2a4a19c45fa36d8677b082ad5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a893530f2a4a19c45fa36d8677b082ad5">stop</a> ()</td></tr>
<tr class="separator:a893530f2a4a19c45fa36d8677b082ad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6052103d7920846b8464db351a2ba78e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a6052103d7920846b8464db351a2ba78e">pause</a> ()</td></tr>
<tr class="separator:a6052103d7920846b8464db351a2ba78e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570c3793285871396d12dc5371b22000"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a570c3793285871396d12dc5371b22000">resume</a> ()</td></tr>
<tr class="separator:a570c3793285871396d12dc5371b22000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83f20c854a76ccf0fdaad094723f6f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#aa83f20c854a76ccf0fdaad094723f6f5">setVerbose</a> (bool verbose)</td></tr>
<tr class="separator:aa83f20c854a76ccf0fdaad094723f6f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d7bf5c4ad0d5140bbee2fe2d03e370"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/classScreenRecorder.html#a82d7bf5c4ad0d5140bbee2fe2d03e370">listAvailableDevices</a> () const</td></tr>
<tr class="separator:a82d7bf5c4ad0d5140bbee2fe2d03e370"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d3/d9f/screen__recorder_8h_source.html#l00016">16</a> of file <a class="el" href="../../d3/d9f/screen__recorder_8h_source.html">screen_recorder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3fee5b65c2e97b01be6f182ce2d4ad74" name="a3fee5b65c2e97b01be6f182ce2d4ad74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fee5b65c2e97b01be6f182ce2d4ad74">&#9670;&nbsp;</a></span>ScreenRecorder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ScreenRecorder::ScreenRecorder </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Create a new Screen Recorder </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">verbose</td><td>true to make the recorder verbose, false to use the default verbosity </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00124">124</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>                                           : verbose_(verbose) {</div>
<div class="line"><span class="lineno">  125</span>    makeAvVerbose(verbose_);</div>
<div class="line"><span class="lineno">  126</span>    avdevice_register_all();</div>
<div class="line"><span class="lineno">  127</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abb5f2657721f0712d0139be5cb46ea4c" name="abb5f2657721f0712d0139be5cb46ea4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5f2657721f0712d0139be5cb46ea4c">&#9670;&nbsp;</a></span>~ScreenRecorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ScreenRecorder::~ScreenRecorder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00129">129</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>{ stopCapturers(); }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a82d7bf5c4ad0d5140bbee2fe2d03e370" name="a82d7bf5c4ad0d5140bbee2fe2d03e370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d7bf5c4ad0d5140bbee2fe2d03e370">&#9670;&nbsp;</a></span>listAvailableDevices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::listAvailableDevices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Print a list of the devices available for capturing </p>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00303">303</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  303</span>                                                {</div>
<div class="line"><span class="lineno">  304</span>    std::string dummy_device_name;</div>
<div class="line"><span class="lineno">  305</span>    std::map&lt;std::string, std::string&gt; options;</div>
<div class="line"><span class="lineno">  306</span>    options.insert({<span class="stringliteral">&quot;list_devices&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>});</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span><span class="preprocessor">#ifdef WINDOWS</span></div>
<div class="line"><span class="lineno">  309</span>    dummy_device_name = <span class="stringliteral">&quot;dummy&quot;</span>;</div>
<div class="line"><span class="lineno">  310</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a> demuxer(getInputFormatName(), dummy_device_name, options);</div>
<div class="line"><span class="lineno">  313</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;##### Available Devices #####&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  314</span>    {</div>
<div class="line"><span class="lineno">  315</span>        <a class="code hl_class" href="../../d5/d60/classLogLevelSetter.html">LogLevelSetter</a> lls(AV_LOG_INFO);</div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  317</span>            demuxer.openInput();</div>
<div class="line"><span class="lineno">  318</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  319</span>        }</div>
<div class="line"><span class="lineno">  320</span>    }</div>
<div class="line"><span class="lineno">  321</span>    std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  322</span>}</div>
<div class="ttc" id="aclassDemuxer_html"><div class="ttname"><a href="../../d7/d21/classDemuxer.html">Demuxer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc1/demuxer_8h_source.html#l00009">demuxer.h:9</a></div></div>
<div class="ttc" id="aclassLogLevelSetter_html"><div class="ttname"><a href="../../d5/d60/classLogLevelSetter.html">LogLevelSetter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfc/log__level__setter_8h_source.html#l00003">log_level_setter.h:3</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6052103d7920846b8464db351a2ba78e" name="a6052103d7920846b8464db351a2ba78e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6052103d7920846b8464db351a2ba78e">&#9670;&nbsp;</a></span>pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::pause </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Pause the screen capture. If the recording is already paused/stopped, nothing will be done </p>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00239">239</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>                           {</div>
<div class="line"><span class="lineno">  240</span>    std::unique_lock&lt;std::mutex&gt; ul{m_};</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (paused_ || stopped_) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  242</span>    paused_ = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  243</span>    cv_.notify_all();</div>
<div class="line"><span class="lineno">  244</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a570c3793285871396d12dc5371b22000" name="a570c3793285871396d12dc5371b22000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a570c3793285871396d12dc5371b22000">&#9670;&nbsp;</a></span>resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::resume </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Resume the screen capture. If the recording is already proceeding/stopped, nothing will be done </p>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00246">246</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>                            {</div>
<div class="line"><span class="lineno">  247</span>    std::unique_lock&lt;std::mutex&gt; ul{m_};</div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">if</span> (!paused_ || stopped_) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  249</span>    paused_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  250</span>    cv_.notify_all();</div>
<div class="line"><span class="lineno">  251</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa83f20c854a76ccf0fdaad094723f6f5" name="aa83f20c854a76ccf0fdaad094723f6f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83f20c854a76ccf0fdaad094723f6f5">&#9670;&nbsp;</a></span>setVerbose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::setVerbose </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set the verbosity of the screen recorder </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">verbose</td><td>true to make the recorder verbose, false to use the default verbosity </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00298">298</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  298</span>                                            {</div>
<div class="line"><span class="lineno">  299</span>    verbose_ = verbose;</div>
<div class="line"><span class="lineno">  300</span>    makeAvVerbose(verbose_);</div>
<div class="line"><span class="lineno">  301</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7025191be3141da7e7283c66ddf8d4b8" name="a7025191be3141da7e7283c66ddf8d4b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7025191be3141da7e7283c66ddf8d4b8">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::start </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>video_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>audio_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>output_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d57/classVideoParameters.html">VideoParameters</a>&#160;</td>
          <td class="paramname"><em>video_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Start the video [and audio] recording. When this function returns, the recorder internal state will be fully initialized and the recording will be in progress. The video stream will be encoded as H.264, with pixel format YUV420, while the audio stream will be encoded as AAC. WARNING: if there is already a recording in progress, calling this function will throw an exception. If the specified output file already exists, this function will simply overwrite it without performing any check </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">video_device</td><td>the name of the video device to use </td></tr>
    <tr><td class="paramname">audio_device</td><td>the name of the audio device to use (if empty, audio won't be recorded) </td></tr>
    <tr><td class="paramname">output_file</td><td>the name of the output file to use to save the recording </td></tr>
    <tr><td class="paramname">video_params</td><td>the video dimensions (NOTE: if width/height is set to 0, the whole display will be considered) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00143">143</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>                                                                                       {</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> (!stopped_) <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Recording already in progress&quot;</span>);</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> (video_device.empty()) <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Video device not specified&quot;</span>);</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> (output_file.empty()) <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Output file not specified&quot;</span>);</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordtype">bool</span> capture_audio = !audio_device.empty();</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    AVPixelFormat video_pix_fmt = AV_PIX_FMT_YUV420P;</div>
<div class="line"><span class="lineno">  153</span>    AVCodecID video_codec_id = AV_CODEC_ID_H264;</div>
<div class="line"><span class="lineno">  154</span>    AVCodecID audio_codec_id = AV_CODEC_ID_AAC;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a> demuxer;</div>
<div class="line"><span class="lineno">  157</span><span class="preprocessor">#ifdef LINUX</span></div>
<div class="line"><span class="lineno">  158</span>    <a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a> audio_demuxer;</div>
<div class="line"><span class="lineno">  159</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    <span class="comment">/* init Muxer */</span></div>
<div class="line"><span class="lineno">  162</span>    muxer_ = std::make_shared&lt;Muxer&gt;(output_file);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    { <span class="comment">/* init Demuxer */</span></div>
<div class="line"><span class="lineno">  165</span>        <span class="keyword">const</span> std::string device_name = generateInputDeviceName(video_device, audio_device, video_params);</div>
<div class="line"><span class="lineno">  166</span>        <span class="keyword">const</span> std::map&lt;std::string, std::string&gt; demuxer_options = generateDemuxerOptions(video_params);</div>
<div class="line"><span class="lineno">  167</span>        demuxer = <a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a>(getInputFormatName(), device_name, demuxer_options);</div>
<div class="line"><span class="lineno">  168</span>        demuxer.<a class="code hl_function" href="../../d7/d21/classDemuxer.html#adb7d8df640f876555025a6ca7d7b2cdb">openInput</a>();</div>
<div class="line"><span class="lineno">  169</span>    }</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    { <span class="comment">/* init Pipeline */</span></div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordtype">bool</span> async;</div>
<div class="line"><span class="lineno">  173</span><span class="preprocessor">#ifdef LINUX</span></div>
<div class="line"><span class="lineno">  174</span>        video_params.setVideoOffset(0, 0);  <span class="comment">// No cropping is performed on Linux</span></div>
<div class="line"><span class="lineno">  175</span>        async = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  176</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  177</span>        async = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  178</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  179</span>        <span class="comment">/* init Pipeline */</span></div>
<div class="line"><span class="lineno">  180</span>        pipeline_ = std::make_unique&lt;Pipeline&gt;(muxer_, async);</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    pipeline_-&gt;initVideo(demuxer, video_codec_id, video_pix_fmt, video_params);</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <span class="comment">/* init audio structures, if necessary */</span></div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span> (capture_audio) {</div>
<div class="line"><span class="lineno">  187</span><span class="preprocessor">#ifdef LINUX</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="comment">/* init audio demuxer and pipeline */</span></div>
<div class="line"><span class="lineno">  189</span>        <span class="keyword">const</span> std::string audio_device_name = generateInputDeviceName(<span class="stringliteral">&quot;&quot;</span>, audio_device, video_params);</div>
<div class="line"><span class="lineno">  190</span>        audio_demuxer = <a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a>(getInputFormatName(<span class="keyword">true</span>), audio_device_name, std::map&lt;std::string, std::string&gt;());</div>
<div class="line"><span class="lineno">  191</span>        audio_demuxer.<a class="code hl_function" href="../../d7/d21/classDemuxer.html#adb7d8df640f876555025a6ca7d7b2cdb">openInput</a>();</div>
<div class="line"><span class="lineno">  192</span>        pipeline_-&gt;initAudio(audio_demuxer, audio_codec_id);</div>
<div class="line"><span class="lineno">  193</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  194</span>        pipeline_-&gt;initAudio(demuxer, audio_codec_id);</div>
<div class="line"><span class="lineno">  195</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  196</span>    }</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="comment">/* Open output file */</span></div>
<div class="line"><span class="lineno">  199</span>    muxer_-&gt;openFile();</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="comment">/* Print info about structures (if verbose) */</span></div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordflow">if</span> (verbose_) {</div>
<div class="line"><span class="lineno">  203</span>        std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  204</span>        demuxer.<a class="code hl_function" href="../../d7/d21/classDemuxer.html#a85f970c6ef269fd10729fea1995a130d">printInfo</a>();</div>
<div class="line"><span class="lineno">  205</span><span class="preprocessor">#ifdef LINUX</span></div>
<div class="line"><span class="lineno">  206</span>        <span class="keywordflow">if</span> (capture_audio) audio_demuxer.<a class="code hl_function" href="../../d7/d21/classDemuxer.html#a85f970c6ef269fd10729fea1995a130d">printInfo</a>(1);</div>
<div class="line"><span class="lineno">  207</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  208</span>        muxer_-&gt;printInfo();</div>
<div class="line"><span class="lineno">  209</span>        pipeline_-&gt;printInfo();</div>
<div class="line"><span class="lineno">  210</span>        std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  211</span>    }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    stopped_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  214</span>    paused_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    <span class="keyword">auto</span> capturer_fn = [<span class="keyword">this</span>](<a class="code hl_class" href="../../d7/d21/classDemuxer.html">Demuxer</a> demuxer) {</div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  218</span>            capture(std::move(demuxer));</div>
<div class="line"><span class="lineno">  219</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;e) {</div>
<div class="line"><span class="lineno">  220</span>            std::cerr &lt;&lt; <span class="stringliteral">&quot;Fatal error during capturing (&quot;</span> &lt;&lt; e.what() &lt;&lt; <span class="stringliteral">&quot;), terminating...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  221</span>            exit(1);</div>
<div class="line"><span class="lineno">  222</span>        }</div>
<div class="line"><span class="lineno">  223</span>    };</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    capturer_ = std::thread(capturer_fn, std::move(demuxer));</div>
<div class="line"><span class="lineno">  226</span><span class="preprocessor">#ifdef LINUX</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">if</span> (capture_audio) audio_capturer_ = std::thread(capturer_fn, std::move(audio_demuxer));</div>
<div class="line"><span class="lineno">  228</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="aclassDemuxer_html_a85f970c6ef269fd10729fea1995a130d"><div class="ttname"><a href="../../d7/d21/classDemuxer.html#a85f970c6ef269fd10729fea1995a130d">Demuxer::printInfo</a></div><div class="ttdeci">void printInfo(int index=0) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/demuxer_8cpp_source.html#l00119">demuxer.cpp:119</a></div></div>
<div class="ttc" id="aclassDemuxer_html_adb7d8df640f876555025a6ca7d7b2cdb"><div class="ttname"><a href="../../d7/d21/classDemuxer.html#adb7d8df640f876555025a6ca7d7b2cdb">Demuxer::openInput</a></div><div class="ttdeci">void openInput()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/demuxer_8cpp_source.html#l00033">demuxer.cpp:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a893530f2a4a19c45fa36d8677b082ad5" name="a893530f2a4a19c45fa36d8677b082ad5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893530f2a4a19c45fa36d8677b082ad5">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScreenRecorder::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Stop the recording. When this function returns, the recorder internal state will have been complemetely cleaned up (including all processing threads) </p>

<p class="definition">Definition at line <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html#l00231">231</a> of file <a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  231</span>                          {</div>
<div class="line"><span class="lineno">  232</span>    stopCapturers();</div>
<div class="line"><span class="lineno">  233</span>    pipeline_-&gt;flush();</div>
<div class="line"><span class="lineno">  234</span>    muxer_-&gt;closeFile();</div>
<div class="line"><span class="lineno">  235</span>    pipeline_.reset();</div>
<div class="line"><span class="lineno">  236</span>    muxer_.reset();</div>
<div class="line"><span class="lineno">  237</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/screen-recorder/<a class="el" href="../../d3/d9f/screen__recorder_8h_source.html">screen_recorder.h</a></li>
<li>src/capture/<a class="el" href="../../db/d01/screen__recorder_8cpp_source.html">screen_recorder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
